<template name='Users'>
   
   <div class='page-header'>
      <h1>User admin page</h1>
   </div>
   
   {{#if Template.subscriptionsReady }} 
   
      {{#if isInRole 'admin'}}
         
         <div class="panel-heading">
            <div class='page-header'>
               <h3 class="panel-title"><b>Edit Area</b></h3>
            </div>
         </div>
         
         <div class="panel-body">
         
            <form class="panel-body form-horizontal">
         
               <div class="form-group">
                  <label for="userid" class="col-sm-2">UserId</label>
                  <div class="col-sm-10">
                     <input type="text" class="form-control" id="userid" value="{{selectedUser._id}}" readonly>
                  </div>
                  <label for="username" class="col-sm-2">Username</label>
                  <div class="col-sm-10">
                     <input type="text" class="form-control" id="username" value="{{selectedUser.username}}" readonly>
                  </div>
                  
                  <label for="companycurrent" class="col-sm-2">Company</label>
                  <div class="col-sm-10 row">
                     <div class="col-sm-6">
                        <input type="text" class="form-control" id="companycurrent" value="{{selectedUser.profile.company}}" readonly>
                     </div>
                     <div class="col-sm-6">
                        <select type="text" class="form-control" id="company" >
                           {{#each companies}}
                              <option value={{name}}>{{name}}</option>
                           {{/each}}
                        </select>
                     </div>
                  </div>
                  
                  <label for="rolecurrent" class="col-sm-2">Role</label>
                  <div class="col-sm-10 row">
                     <div class="col-sm-6">
                        <input type="text" class="form-control" id="rolecurrent" value="{{selectedUser.roles}}" readonly>
                     </div>
                     <div class="col-sm-6">
                        <select type="text" class="form-control" id="role" >
                           {{#each roles}}
                              <option value={{name}}>{{name}}</option>
                           {{/each}}
                        </select>
                     </div>
                  </div>
                  <input type="submit" value="Submit" class="btn btn-primary submit" />
               </div>
         
            </form>
         
         </div>
         
         <div class='page-header'>
            <h3 class="panel-title"><b>User List</b></h3>
         </div>
         
         <div class="table-responsive">
            <table class='table'>
               <thead>
                  <tr>
                     <th>userID</th>
                     <th>Name</th>
                     <th>Created at</th>
                     <th>Company</th>
                     <th>Role</th>
                  </tr>
               </thead>
               <tbody>
                  {{#each users}}
                  <tr>
                     <td>{{_id}}</td>
                     <td>{{username}}</td>
                     <td>{{dateFormat}}</td>
                     <td>{{profile.company}}</td>
                     <td>{{userRole}}</td>
                     <td><button class='edit-user btn btn-danger'>edit</button></td>
                  </tr>
                  {{/each}}
               </tbody>
            </table>
         </div>
         
         {{else}}
         
            <p>Sorry you have no access to this userlist.</p>
         
         {{/if}} 
   
   {{else}}
   
      {{>spinner}}

   {{/if}}
   
</template>